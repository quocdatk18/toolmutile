<!DOCTYPE html>
<html>

<head>
    <title>Test NOHU UI Data</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        .checkbox-group {
            display: flex;
            gap: 15px;
            margin: 10px 0;
            flex-wrap: wrap;
        }

        .site-card {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 6px;
        }

        .result {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            white-space: pre-wrap;
        }

        .success {
            background: #e6ffe6;
            border: 1px solid #99ff99;
        }

        .error {
            background: #ffe6e6;
            border: 1px solid #ff9999;
        }

        button {
            padding: 10px 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }

        button:hover {
            background: #0056b3;
        }
    </style>
</head>

<body>
    <h1>üß™ Test NOHU UI Data Flow</h1>

    <div class="test-section">
        <h2>üì± NOHU App Sites (Centralized Config)</h2>
        <p>Simulate NOHU tool checkboxes v·ªõi centralized config</p>

        <div id="appPromoSites" class="checkbox-group">
            <label class="site-card">
                <input type="checkbox" class="site-check" data-name="Go99">
                <span>Go99</span>
            </label>
            <label class="site-card">
                <input type="checkbox" class="site-check" data-name="NOHU">
                <span>NOHU</span>
            </label>
            <label class="site-card">
                <input type="checkbox" class="site-check" data-name="TT88">
                <span>TT88</span>
            </label>
            <label class="site-card">
                <input type="checkbox" class="site-check" data-name="MMOO">
                <span>MMOO</span>
            </label>
            <label class="site-card">
                <input type="checkbox" class="site-check" data-name="789P">
                <span>789P</span>
            </label>
            <label class="site-card">
                <input type="checkbox" class="site-check" data-name="33WIN">
                <span>33WIN</span>
            </label>
            <label class="site-card">
                <input type="checkbox" class="site-check" data-name="88VV">
                <span>88VV</span>
            </label>
        </div>

        <button onclick="testAppSites()">üß™ Test App Sites (Centralized)</button>
        <div id="app-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>üì± NOHU SMS Sites (Centralized Config)</h2>
        <p>Simulate NOHU SMS checkboxes v·ªõi centralized config</p>

        <div id="smsPromoSites" class="checkbox-group">
            <label class="site-card">
                <input type="checkbox" class="site-check-sms" data-name="Go99-SMS">
                <span>Go99 SMS</span>
            </label>
            <label class="site-card">
                <input type="checkbox" class="site-check-sms" data-name="NOHU-SMS">
                <span>NOHU SMS</span>
            </label>
            <label class="site-card">
                <input type="checkbox" class="site-check-sms" data-name="TT88-SMS">
                <span>TT88 SMS</span>
            </label>
        </div>

        <button onclick="testSmsSites()">üß™ Test SMS Sites (Centralized)</button>
        <div id="sms-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>üîß Simulation: runAutoSequence()</h2>
        <p>Simulate NOHU tool runAutoSequence function</p>

        <label>
            <input type="radio" name="promoType" value="app" checked> T·∫£i App
        </label>
        <label>
            <input type="radio" name="promoType" value="sms"> Tin Nh·∫Øn SMS
        </label><br><br>

        <button onclick="simulateRunAutoSequence()">üöÄ Simulate runAutoSequence()</button>
        <div id="simulation-result" class="result"></div>
    </div>

    <script>
        // Test App Sites (gi·ªëng function getSelectedSites)
        function testAppSites() {
            const sites = [];
            // Simulate NOHU tool logic
            document.querySelectorAll('#appPromoSites .site-check:checked').forEach(checkbox => {
                const name = checkbox.getAttribute('data-name');
                sites.push({ name }); // Ch·ªâ pass name - centralized config
            });

            const result = {
                method: 'App Sites - Centralized Config',
                sites: sites,
                note: 'URLs s·∫Ω ƒë∆∞·ª£c l·∫•y t·ª´ optimized-automation.js'
            };

            document.getElementById('app-result').innerHTML = `
                <h4>‚úÖ App Sites Result:</h4>
                <pre>${JSON.stringify(result, null, 2)}</pre>
            `;
            document.getElementById('app-result').className = 'result success';
        }

        // Test SMS Sites
        function testSmsSites() {
            const sites = [];
            // Simulate NOHU tool SMS logic
            document.querySelectorAll('#smsPromoSites .site-check-sms:checked').forEach(checkbox => {
                const name = checkbox.getAttribute('data-name');
                sites.push({ name }); // Ch·ªâ pass name - centralized config
            });

            const result = {
                method: 'SMS Sites - Centralized Config',
                sites: sites,
                note: 'URLs s·∫Ω ƒë∆∞·ª£c l·∫•y t·ª´ optimized-automation.js'
            };

            document.getElementById('sms-result').innerHTML = `
                <h4>‚úÖ SMS Sites Result:</h4>
                <pre>${JSON.stringify(result, null, 2)}</pre>
            `;
            document.getElementById('sms-result').className = 'result success';
        }

        // Simulate runAutoSequence function
        function simulateRunAutoSequence() {
            const promoType = document.querySelector('input[name="promoType"]:checked')?.value || 'app';
            let sites = [];
            let actionType = 'full';

            if (promoType === 'app') {
                // Get App Promo sites - CENTRALIZED CONFIG (C√°ch 1)
                document.querySelectorAll('#appPromoSites .site-check:checked').forEach(checkbox => {
                    const name = checkbox.getAttribute('data-name');
                    sites.push({ name }); // Ch·ªâ pass name, kh√¥ng c·∫ßn URL
                });
                actionType = 'full';
            } else {
                // Get SMS Promo sites - CENTRALIZED CONFIG (C√°ch 1)
                document.querySelectorAll('#smsPromoSites .site-check-sms:checked').forEach(checkbox => {
                    const name = checkbox.getAttribute('data-name');
                    sites.push({ name }); // Ch·ªâ pass name, kh√¥ng c·∫ßn URL
                });
                actionType = 'sms';
            }

            const config = {
                username: 'TestUser123',
                fullname: 'NGUYEN VAN TEST',
                password: 'test123456',
                withdrawPassword: 'test123456789',
                bankName: 'VCB',
                bankBranch: 'HCM',
                accountNumber: '1234567890',
                apiKey: 'test-api-key',
                sites: sites
            };

            const automationConfig = {
                toolId: 'nohu-tool',
                profileId: 'test-profile-123',
                config: config,
                actionType: actionType,
                promoType: promoType
            };

            const result = {
                method: `runAutoSequence() - ${promoType.toUpperCase()}`,
                automationConfig: automationConfig,
                note: 'ƒê√¢y l√† data s·∫Ω ƒë∆∞·ª£c g·ª≠i ƒë·∫øn API /api/automation/run'
            };

            document.getElementById('simulation-result').innerHTML = `
                <h4>üöÄ runAutoSequence() Simulation:</h4>
                <pre>${JSON.stringify(result, null, 2)}</pre>
            `;
            document.getElementById('simulation-result').className = 'result success';
        }

        // Auto-select some checkboxes for demo
        window.onload = function () {
            document.querySelector('[data-name="Go99"]').checked = true;
            document.querySelector('[data-name="NOHU"]').checked = true;
            document.querySelector('[data-name="TT88"]').checked = true;

            document.querySelector('[data-name="Go99-SMS"]').checked = true;
            document.querySelector('[data-name="NOHU-SMS"]').checked = true;

            testAppSites();
            testSmsSites();
            simulateRunAutoSequence();
        };
    </script>
</body>

</html>